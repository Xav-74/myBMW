<div id="myBMW_widget_ID" class="eqLogic-widget eqLogic noResize myBMW_widget myBMW" style="width: 900px; height: 740px; text-align:center; border:#border#; border-radius:#border-radius#; background-color:#background-color#; color:#color#; #style#;" data-eqType="#eqType#" data-translate-category="#translate_category#" data-category="#category#" data-tags="#tags#" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-version="dashboard">
	
	<center class="widget-name" style="padding-right: 0px;">
		<span class="object_name" style="font-size:1.1em ;display:none;">#object_name#</span>
		<a href="#eqLink#" style="font-size:1.1em ;#hideEqLogicName#">#name_display#</a>
	</center>
	
	<div class="container-fluid">
		
		<div class="row">
			
			<div class="col-sm-6">
		
				<div class="row" id="picture">
					<img id="img_car#id#" src="" style="height:150px" />
				</div>
				
				<div class="row">
					<div class="col-sm-6"><span class="label" style="font-weight: bold">Véhicule</span></div>
					<div class="col-sm-6"><span class="label" style="font-weight: bold">Kilométrage</span></div>
				</div>
				
				<div class="row" id="infos">
					<div class="col-sm-6"><span class="state"><i class="iconCmd#doorLockState_id#"></i></span></div>
					<div class="col-sm-6"><span class="iconCmd#mileage_id# iconCmd"></span></div>
				</div>
				
				<hr class="cmdName">
				
				<div class="row" id="engine">
					<div class="col-sm-6">
						<span class="label cmdName" style="font-weight: bold">Moteur électrique</span>
						</br></br>
						<div class="row label"><i class="fa-xl fas fa-map-pin"></i><span class="iconCmd#beRemainingRangeElectric_id#"></span></div></br>
						<div class="row label"><i class="fa-xl fas fa-car-battery"></i><span class="iconCmd#chargingLevelHv_id#"></span></div></br>
						<div class="row label"><i class="fa-xl fas fa-plug"></i><span class="iconCmd#connectorStatus_id#"></span></div></br>
						<div class="row label"><i class="fa-xl fas fa-bolt"></i><span class="iconCmd#chargingStatus_id#"></span></div>
					</div>
					<div class="col-sm-6">
						<span class="label cmdName" style="font-weight: bold">Moteur thermique</span>
						</br></br>
						<div class="row label"><i class="fa-xl fas fa-map-pin"></i><span class="iconCmd#beRemainingRangeFuelKm_id#"></span></div></br>
						<div class="row label"><i class="fa-xl fas fa-gas-pump"></i><span class="iconCmd#remaining_fuel_id#"></span></div>
					</div>
				</div>
				
				<hr class="cmdName">
				
				<span class="label cmdName" style="font-weight: bold">Portes & Fenêtres</span>
				</br>
				<div class="row" id="doors_windows">
					<div class="row"><span class="label pull-center">Capot : <i class="iconCmd#hood_state_id#"></i></span></div>
					</br>
					<div class="row">
						<div class="col-sm-3">
							</br>
							<div class="label pull-left" style="margin-left: 30px">Porte : <i class="iconCmd#doorDriverFront_id#"></i></div>
							</br>
							<div class="label pull-left" style="margin-left: 30px">Fenêtre : <i class="iconCmd#windowDriverFront_id#"></i></div>
							</br></br></br>
							<div class="label pull-left" style="margin-left: 30px">Porte : <i class="iconCmd#doorDriverRear_id#"></i></div>
							</br>
							<div class="label pull-left" style="margin-left: 30px">Fenêtre : <i class="iconCmd#windowDriverRear_id#"></i></div>
						</div>
						<div class="col-sm-6">
							<img src="plugins/myBMW/core/img/widget_car.png" height="150" width="150" />
						</div>
						<div class="col-sm-3">
							</br>
							<div class="label pull-left" style="margin-left: -30px">Porte : <i class="iconCmd#doorPassengerFront_id#"></i></div>
							</br>
							<div class="label pull-left" style="margin-left: -30px">Fenêtre : <i class="iconCmd#windowPassengerFront_id#"></i></div>
							</br></br></br>
							<div class="label pull-left" style="margin-left: -30px">Porte : <i class="iconCmd#doorPassengerRear_id#"></i></div>
							</br>
							<div class="label pull-left" style="margin-left: -30px">Fenêtre : <i class="iconCmd#windowPassengerRear_id#"></i></div>
						</div>
					</div>
					</br>
					<div class="row"><span class="label pull-center">Coffre : <i class="iconCmd#trunk_state_id#"></i></span></div>				
				</div>
			</div>
			
			<div class="col-sm-6">
			
				<span class="label cmdName" style="font-weight: bold">Actions</span>
				<div class="row" id="actions">
					<button class="btn cmd action" data-cmd_id="#refresh_id#" title="Rafraichir" onclick="jeedom.cmd.execute({id: #refresh_id#});"><i class="fa-2x fas fa-sync"></i></button>
					<button class="btn cmd action" data-cmd_id="#doorLock_id#" title="Verrouiller" onclick="jeedom.cmd.execute({id: #doorLock_id#});"><i class="fa-2x fas fa-lock"></i></button>
					<button class="btn cmd action" data-cmd_id="#doorUnlock_id#" title="Déverrouiller" onclick="jeedom.cmd.execute({id: #doorUnlock_id#});"><i class="fa-2x fas fa-lock-open"></i></button>
					<button class="btn cmd action" data-cmd_id="#climateNow_id#" title="Climatiser" onclick="jeedom.cmd.execute({id: #climateNow_id#});"><i class="fa-2x fas fa-fan"></i></button>
					<button class="btn cmd action" data-cmd_id="#lightFlash_id#" title="Appel de phares" onclick="jeedom.cmd.execute({id: #lightFlash_id#});"><i class="fa-2x fas fa-lightbulb"></i></button>
					<button class="btn cmd action" data-cmd_id="#hornBlow_id#" title="Klaxonner" onclick="jeedom.cmd.execute({id: #hornBlow_id#});"><i class="fa-2x fas fa-bullhorn"></i></button>
				</div>
			
				<hr class="cmdName">
				
				<span class="label cmdName" style="font-weight: bold">Localisation</span>
				<div class="row" id="location">
					<iframe id="myFrame#id#" src="https://maps.google.com/maps?hl=fr&ie=utf8&output=embed&q=#gps_coordinates#" width="380" height="220" frameborder="0" style="border:0"></iframe>
				</div>
				
				<hr class="cmdName">
				
				<span class="label cmdName" style="font-weight: bold">Messages</span>
				<div class="row" id="messages">
					<textarea id="msg_area" readonly class="form-control input-sm message" rows="12" placeholder="Messages"></textarea>
				</div>
			
			</div>
			
		</div>
		
		</br>
		<div class="row">
			<div class="label pull-center">Dernière mise à jour : <span class="iconCmd#lastUpdate_id# state"></span></div>
		</div>
	
	</div>
	
	<script>
        
      	jeedom.cmd.update['#id#'] =function(_options) {
            var cmd  = $('#myFrame#id#')[0];
			cmd.src = "https://maps.google.com/maps?hl=fr&ie=utf8&output=embed&q="+_options.display_value;
		}
		jeedom.cmd.update['#id#']({display_value: '#gps_coordinates#'});
		
		
		jeedom.cmd.update['#id#'] =function(_options) {
            var cmd2  = $('#img_car#id#')[0];
			cmd2.src = "/plugins/myBMW/data/"+_options.display_value+".png";
		}
		jeedom.cmd.update['#id#']({display_value: '#vehicle_vin#id##'});
				
				
		jeedom.cmd.update['#doorLockState_id#'] = function(_options) {
            if ( _options.display_value == "Unlocked")  {
            	$('.iconCmd#doorLockState_id#').empty().append('<i class="fa-2x icon_green jeedomapp-lock-ouvert"></i>');
            }
          	if ( _options.display_value == "Locked")  {
              	$('.iconCmd#doorLockState_id#').empty().append('<i class="fa-2x icon_red jeedomapp-lock-ferme"></i>');
            }
        }
		jeedom.cmd.update['#doorLockState_id#']({display_value:'#doorLockState#'});
      	
		
		jeedom.cmd.update['#doorDriverFront_id#'] = function(_options) {
           if ( _options.display_value == "OPENED")  {
            	$('.iconCmd#doorDriverFront_id#').empty().append('<i class="icon_green jeedomapp-lock-ouvert"></i>');
            }
          	if ( _options.display_value == "CLOSED")  {
              	$('.iconCmd#doorDriverFront_id#').empty().append('<i class="icon_red jeedomapp-lock-ferme"></i>');
            }
		}
		jeedom.cmd.update['#doorDriverFront_id#']({display_value:'#doorDriverFront#'});
		
		
		jeedom.cmd.update['#doorDriverRear_id#'] = function(_options) {
           if ( _options.display_value == "OPENED")  {
            	$('.iconCmd#doorDriverRear_id#').empty().append('<i class="icon_green jeedomapp-lock-ouvert"></i>');
            }
          	if ( _options.display_value == "CLOSED")  {
              	$('.iconCmd#doorDriverRear_id#').empty().append('<i class="icon_red jeedomapp-lock-ferme"></i>');
            }
		}
		jeedom.cmd.update['#doorDriverRear_id#']({display_value:'#doorDriverRear#'});
		
		
		jeedom.cmd.update['#doorPassengerFront_id#'] = function(_options) {
           if ( _options.display_value == "OPENED")  {
            	$('.iconCmd#doorPassengerFront_id#').empty().append('<i class="icon_green jeedomapp-lock-ouvert"></i>');
            }
          	if ( _options.display_value == "CLOSED")  {
              	$('.iconCmd#doorPassengerFront_id#').empty().append('<i class="icon_red jeedomapp-lock-ferme"></i>');
            }
		}
		jeedom.cmd.update['#doorPassengerFront_id#']({display_value:'#doorPassengerFront#'});
		
		
		jeedom.cmd.update['#doorPassengerRear_id#'] = function(_options) {
           if ( _options.display_value == "OPENED")  {
            	$('.iconCmd#doorPassengerRear_id#').empty().append('<i class="icon_green jeedomapp-lock-ouvert"></i>');
            }
          	if ( _options.display_value == "CLOSED")  {
              	$('.iconCmd#doorPassengerRear_id#').empty().append('<i class="icon_red jeedomapp-lock-ferme"></i>');
            }
		}
		jeedom.cmd.update['#doorPassengerRear_id#']({display_value:'#doorPassengerRear#'});
		
		
		jeedom.cmd.update['#windowDriverFront_id#'] = function(_options) {
           if ( _options.display_value == "OPENED")  {
            	$('.iconCmd#windowDriverFront_id#').empty().append('<i class="icon_green jeedomapp-lock-ouvert"></i>');
            }
          	if ( _options.display_value == "CLOSED")  {
              	$('.iconCmd#windowDriverFront_id#').empty().append('<i class="icon_red jeedomapp-lock-ferme"></i>');
            }
		}
		jeedom.cmd.update['#windowDriverFront_id#']({display_value:'#windowDriverFront#'});
		
		
		jeedom.cmd.update['#windowDriverRear_id#'] = function(_options) {
           if ( _options.display_value == "OPENED")  {
            	$('.iconCmd#windowDriverRear_id#').empty().append('<i class="icon_green jeedomapp-lock-ouvert"></i>');
            }
          	if ( _options.display_value == "CLOSED")  {
              	$('.iconCmd#windowDriverRear_id#').empty().append('<i class="icon_red jeedomapp-lock-ferme"></i>');
            }
		}
		jeedom.cmd.update['#windowDriverRear_id#']({display_value:'#windowDriverRear#'});
		
		
		jeedom.cmd.update['#windowPassengerFront_id#'] = function(_options) {
           if ( _options.display_value == "OPENED")  {
            	$('.iconCmd#windowPassengerFront_id#').empty().append('<i class="icon_green jeedomapp-lock-ouvert"></i>');
            }
          	if ( _options.display_value == "CLOSED")  {
              	$('.iconCmd#windowPassengerFront_id#').empty().append('<i class="icon_red jeedomapp-lock-ferme"></i>');
            }
		}
		jeedom.cmd.update['#windowPassengerFront_id#']({display_value:'#windowPassengerFront#'});
		
		
		jeedom.cmd.update['#windowPassengerRear_id#'] = function(_options) {
           if ( _options.display_value == "OPENED")  {
            	$('.iconCmd#windowPassengerRear_id#').empty().append('<i class="icon_green jeedomapp-lock-ouvert"></i>');
            }
          	if ( _options.display_value == "CLOSED")  {
              	$('.iconCmd#windowPassengerRear_id#').empty().append('<i class="icon_red jeedomapp-lock-ferme"></i>');
            }
		}
		jeedom.cmd.update['#windowPassengerRear_id#']({display_value:'#windowPassengerRear#'});
				
      
		jeedom.cmd.update['#trunk_state_id#'] = function(_options) {
           if ( _options.display_value == "OPENED")  {
            	$('.iconCmd#trunk_state_id#').empty().append('<i class="icon_green jeedomapp-lock-ouvert"></i>');
            }
          	if ( _options.display_value == "CLOSED")  {
              	$('.iconCmd#trunk_state_id#').empty().append('<i class="icon_red jeedomapp-lock-ferme"></i>');
            }
		}
		jeedom.cmd.update['#trunk_state_id#']({display_value:'#trunk_state#'});
		
      
		jeedom.cmd.update['#hood_state_id#'] = function(_options) {
           if ( _options.display_value == "OPENED")  {
            	$('.iconCmd#hood_state_id#').empty().append('<i class="icon_green jeedomapp-lock-ouvert"></i>');
            }
          	if ( _options.display_value == "CLOSED")  {
              	$('.iconCmd#hood_state_id#').empty().append('<i class="icon_red jeedomapp-lock-ferme"></i>');
            }
		}
		jeedom.cmd.update['#hood_state_id#']({display_value:'#hood_state#'});
		
		
		jeedom.cmd.update['#mileage_id#'] = function(_options) {
           	$('.iconCmd#mileage_id#').empty().append('<span>'+_options.display_value+'</span>');
        }
		jeedom.cmd.update['#mileage_id#']({display_value:'#mileage#'});
		
		
		jeedom.cmd.update['#beRemainingRangeElectric_id#'] = function(_options) {
           	$('.iconCmd#beRemainingRangeElectric_id#').empty().append('<span>'+' '+_options.display_value+' kms restants'+'</span>');
        }
		jeedom.cmd.update['#beRemainingRangeElectric_id#']({display_value:'#beRemainingRangeElectric#'});
		
		
		jeedom.cmd.update['#chargingLevelHv_id#'] = function(_options) {
           	$('.iconCmd#chargingLevelHv_id#').empty().append('<span>'+' '+_options.display_value+' %'+'</span>');
        }
		jeedom.cmd.update['#chargingLevelHv_id#']({display_value:'#chargingLevelHv#'});
		
		
		jeedom.cmd.update['#connectorStatus_id#'] = function(_options) {
           	if ( _options.display_value == 1)  {			
				$('.iconCmd#connectorStatus_id#').empty().append('<span> Prise : connectée</span>');
			}
			if ( _options.display_value == 0)  {			
				$('.iconCmd#connectorStatus_id#').empty().append('<span> Prise : deconnectée</span>');
			}
        }
		jeedom.cmd.update['#connectorStatus_id#']({display_value:'#connectorStatus#'});
		
		
		jeedom.cmd.update['#chargingStatus_id#'] = function(_options) {
           	$('.iconCmd#chargingStatus_id#').empty().append('<span>'+' Charge : '+_options.display_value+'</span>');
        }
		jeedom.cmd.update['#chargingStatus_id#']({display_value:'#chargingStatus#'});
		
		
		jeedom.cmd.update['#beRemainingRangeFuelKm_id#'] = function(_options) {
           	$('.iconCmd#beRemainingRangeFuelKm_id#').empty().append('<span>'+' '+_options.display_value+' kms restants'+'</span>');
        }
		jeedom.cmd.update['#beRemainingRangeFuelKm_id#']({display_value:'#beRemainingRangeFuelKm#'});
		
		
		jeedom.cmd.update['#remaining_fuel_id#'] = function(_options) {
           	$('.iconCmd#remaining_fuel_id#').empty().append('<span>'+' '+_options.display_value+' L'+'</span>');
        }
		jeedom.cmd.update['#remaining_fuel_id#']({display_value:'#remaining_fuel#'});
		
		/*jeedom.cmd.update['#vehicleMessages_id#'] = function(_options) {
           	
			$('#msg_area').val("Hello");
		}
		jeedom.cmd.update['#vehicleMessages_id#']({display_value:'#vehicleMessages#'});*/
		
		
		jeedom.cmd.update['#lastUpdate_id#'] = function(_options) {
           	$('.iconCmd#lastUpdate_id#').empty().append('<span>'+_options.display_value+'</span>');
        }
		jeedom.cmd.update['#lastUpdate_id#']({display_value:'#lastUpdate#'});
		
		
      
	</script>

	<style>
	
	.myBMW_widget .container-fluid {
		margin-top: 10px;
	}

	.myBMW_widget hr {
		border-top: 1px solid;
		margin : 10px 10px 10px 10px;
	}

	.myBMW_widget #infos {
		margin-top: 10px;
		margin-bottom: 16px;
	}
	
	.myBMW_widget #engine {
		margin-top: 10px;
		margin-bottom: 15px;
	}
	
	.myBMW_widget #doors_windows {
		margin: 10px 10px 10px 10px;
	}
	
	.myBMW_widget #actions {
		margin-top: 10px;
		margin-bottom: 20px;
	}
	
	.myBMW_widget .btn {
		width: 48px !important;
		height: 48px !important;
		max-width: 48px !important;
		max-height: 48px !important;
	}
	
	.myBMW_widget #location {
		margin-top: 10px;
		margin-bottom: 15px;
	}
	
	.myBMW_widget #messages {
		margin : 10px 23px 10px 23px;
	}
		
	</style>
	
</div>